<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Battleship Game</title>
    <script>
        async function placeShips(event) {
            event.preventDefault();

            const playerName = document.getElementById("playerName").value;
            const shipData = []; // Collect ship data from input fields

            // Assume we have input fields for ships; this is just an example
            const ship1 = { type: "Battleship", coordinates: [0, 0] }; // Add logic to collect real data
            const ship2 = { type: "Cruiser", coordinates: [1, 1] }; // Example

            shipData.push(ship1, ship2); // Add your ships to the array

            const response = await fetch('/api/battleship/place-ship/' + playerName, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(shipData),
            });

            if (response.ok) {
                alert('Ships placed successfully.');
            } else {
                const error = await response.text();
                alert('Error: ' + error);
            }
        }

        async function fireMissile(event) {
            event.preventDefault();

            const playerName = document.getElementById("playerName").value;
            const fireRequest = {
                coordinates: [2, 2] // Collect coordinates from input fields
            };

            const response = await fetch('/api/battleship/fire/' + playerName, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(fireRequest),
            });

            if (response.ok) {
                const result = await response.text();
                alert(result);
            } else {
                const error = await response.text();
                alert('Error: ' + error);
            }
        }
    </script>
</head>
<body>
    <h1>Game in Progress</h1>
    <p>Player: <span id="playerName"></span></p>
    
    <form onsubmit="placeShips(event)">
        <h2>Place Your Ships</h2>
        <!-- Add fields to place ships -->
        <button type="submit">Place Ships</button>
    </form>

    <form onsubmit="fireMissile(event)">
        <h2>Fire Missile</h2>
        <label for="fireCoordinates">Enter Coordinates:</label>
        <input type="text" id="fireCoordinates" required>
        <button type="submit">Fire!</button>
    </form>
</body>
</html>
